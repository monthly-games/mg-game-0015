# Kingdom Rebuild Project - 프로덕션 디자인 문서

> game_id: game_0015
> repo: mg-game-0015
> title_kr: 왕국 재건 프로젝트
> title_en: Kingdom Rebuild Project
> genre_tags: idle, city_building, story
> doc_type: production_design
> source_of_truth: docs/design/gdd_game_0015.json
> last_updated: 2025-12-19

---

## 1. 재미 요소 (Fun Factors)

### 1.1 핵심 재미 (Core Fun)
| 요소 | 설명 | 강도 |
|------|------|------|
| **왕국 재건** | 폐허에서 번영하는 왕국을 만드는 성취감 | ★★★★★ |
| **스토리** | 챕터별 왕국의 역사 발견 | ★★★★☆ |
| **방치 성장** | 오프라인에서도 성장하는 만족감 | ★★★★☆ |
| **건물 배치** | 나만의 왕국 레이아웃 설계 | ★★★☆☆ |

### 1.2 만족감 요소 (Satisfaction)
- **건물 완공**: 새 건물 건설 완료 시 연출
- **스토리 해금**: 새 챕터 해금 시 스토리 진행
- **자원 수확**: 방치 보상 수확의 만족감
- **왕국 발전**: 왕국이 시각적으로 발전하는 모습

### 1.3 도전 요소 (Challenge)
```
도전 구조:
├── 자원 밸런스 관리 (목재/석재/골드)
├── 건물 배치 최적화
├── 주민 효율 배치
├── 챕터별 건설 목표 달성
└── 왕국 평판 시스템
```

### 1.4 사회적 요소 (Social)
- **왕국 방문**: 친구 왕국 구경
- **자원 교환**: 친구와 자원 교환
- **랭킹**: 왕국 발전도 랭킹
- **협동 건설**: 대규모 건축물 협동

---

## 2. 게임 루프 (Game Loop)

### 2.1 코어 루프 (1~3분)
```
┌─────────────────────────────────────────────────┐
│                    코어 루프                      │
├─────────────────────────────────────────────────┤
│  [자원 수확] → [건물 건설] → [주민 배치]          │
│       ↑                            ↓             │
│       └──── [자동 생산] ← [건물 운영] ←┘         │
└─────────────────────────────────────────────────┘
```

**단계별 상세:**
1. **자원 수확** (10초): 방치 생산된 자원 수확
2. **건물 건설** (30~60초): 새 건물 건설 시작
3. **주민 배치** (15초): 건물에 주민 배치
4. **건물 운영** (지속): 건물이 자동으로 자원 생산
5. **자동 생산** (방치): 오프라인에서도 생산 계속

### 2.2 세션 루프 (5~10분)
```
[접속] → [방치 보상] → [퀘스트 확인] → [건설/업그레이드] → [스토리 진행]
                                                             ↓
                                              [다음 목표 설정] ← [챕터 완료]
```

### 2.3 메타 루프 (장기)
```
┌──────────────────────────────────────────────────────┐
│                     메타 진행                         │
├──────────────────────────────────────────────────────┤
│  [건물 완공] → [자원 생산 증가] → [새 지역 해금]       │
│         ↓                              ↓             │
│  [스토리 진행]                   [프레스티지 전환]     │
│         ↓                              ↓             │
│  [왕국 확장] ←───────────────────────────┘           │
└──────────────────────────────────────────────────────┘
```

### 2.4 플로우 다이어그램
```
[앱 시작]
    ↓
[방치 보상 화면]
    ↓
[메인 왕국 화면] ────→ [건물 목록]
    │                  [스토리]
    │                  [상점]
    │                  [설정]
    ↓
[건설 모드] → [위치 선택] → [건설 시작] → [완료]
```

---

## 3. BM 모델 (Business Model)

### 3.1 수익화 전략
| 채널 | 비중 | 설명 |
|------|------|------|
| **리워드 광고** | 45% | 생산 2배, 즉시 완료 |
| **프리미엄 건물** | 25% | 특별 건물 팩 |
| **편의 기능** | 15% | 건설 가속, 자동화 |
| **광고 제거** | 10% | 일회성 구매 |
| **성장 패키지** | 5% | 자원/보석 패키지 |

### 3.2 과금 포인트
```
비과금 유저 경험:
├── 모든 스토리 완료 가능
├── 기본 건물 전부 건설 가능
├── 광고 시청으로 진행 가속
└── 시간 투자로 완전한 왕국 건설

과금 유저 혜택:
├── 광고 제거 ($2.99)
├── 프리미엄 건물 팩 ($3.99~$9.99)
├── 성장 가속 패키지 ($4.99)
├── 보석 패키지 ($0.99~$49.99)
└── VIP 패스 ($6.99/월)
```

### 3.3 가격 정책
| 상품 | 가격 | 가치 |
|------|------|------|
| 소량 보석 (100) | $0.99 | 즉시 완료 2회 |
| 중량 보석 (500) | $3.99 | 20% 보너스 |
| 대량 보석 (1200) | $7.99 | 40% 보너스 |
| 광고 제거 | $2.99 | 영구 적용 |
| 건축가 팩 | $6.99 | 프리미엄 건물 5종 |
| VIP 패스 | $6.99/월 | 일일 보석 + 생산 부스트 |

### 3.4 리텐션 메커니즘
- **일일 보상**: 출석 체크 (7일 사이클)
- **일일 퀘스트**: 건설, 수확, 업그레이드
- **스토리 해금**: 챕터별 스토리 진행
- **시즌 이벤트**: 테마 건물 이벤트

---

## 4. 레벨 디자인 (Level Design)

### 4.1 난이도 곡선
```
자원 요구량
  ▲
  │                              ╭──────
  │                         ╭────╯
  │                    ╭────╯
  │               ╭────╯
  │          ╭────╯
  │     ╭────╯
  │╭────╯
  └──────────────────────────────────────→ 챕터
    1    2    3    4    5    6    7
```

**성장 공식:**
```
건설_비용 = 기본_비용 × (1.15 ^ 건물_레벨)
생산_속도 = 기본_생산 × (1 + 건물_레벨 × 0.1)
방치_최대시간 = 8시간 (업그레이드로 증가)
```

### 4.2 콘텐츠 진행
| 챕터 | 해금 조건 | 새로운 요소 |
|------|----------|-------------|
| 1. 폐허 | 시작 | 기본 건물 5종, 튜토리얼 |
| 2. 재건 | 왕국 Lv.5 | 생산 건물, 주민 시스템 |
| 3. 성장 | 왕국 Lv.10 | 문화 건물, 새 지역 |
| 4. 번영 | 왕국 Lv.20 | 군사 건물, 방어 시스템 |
| 5. 확장 | 왕국 Lv.35 | 다른 지역 정복 |
| 6. 제국 | 왕국 Lv.50 | 특수 건물, 거대 건축 |
| 7. 전설 | 프레스티지 | 영구 보너스, 신화 건물 |

### 4.3 밸런싱 공식
```dart
// 자원 생산량 계산
int calculateProduction(Building building) {
  int base = building.baseProduction;
  double levelBonus = 1 + building.level * 0.1;
  double workerBonus = 1 + building.workers * 0.05;
  return (base * levelBonus * workerBonus).toInt();
}

// 방치 보상 계산
int idleReward(Kingdom kingdom, Duration offlineTime) {
  int totalProduction = kingdom.buildings.map((b) =>
    calculateProduction(b)
  ).sum;
  int maxHours = 8;
  int hours = min(offlineTime.inHours, maxHours);
  return totalProduction * hours;
}

// 건설 시간
Duration buildTime(Building building, int targetLevel) {
  int baseMinutes = 5;
  return Duration(minutes: baseMinutes * pow(1.3, targetLevel).toInt());
}
```

### 4.4 보상 체계
| 보상 유형 | 획득 조건 | 수량 |
|-----------|----------|------|
| 자원 생산 | 건물 운영 | 시간당 생산량 |
| 챕터 보상 | 스토리 완료 | 보석 50~200 |
| 일일 보너스 | 출석 | 자원 팩 |
| 퀘스트 보상 | 퀘스트 완료 | 자원/보석 |
| 업적 보석 | 마일스톤 | 20~500 보석 |

---

## 5. UI/UX 설계

### 5.1 정보 계층
```
레벨 1 (항상 표시):
├── 자원 (골드/목재/석재)
├── 보석
├── 왕국 레벨
└── 알림 배지

레벨 2 (상호작용 시):
├── 건물 정보
├── 건설 메뉴
├── 주민 배치
└── 업그레이드 옵션

레벨 3 (팝업):
├── 스토리 컷신
├── 건설 완료
├── 설정 메뉴
└── 상점
```

### 5.2 네비게이션 흐름
```
[메인 왕국]
    ├── [건설] → [건물 목록] → [위치 선택] → [건설]
    ├── [스토리] → [챕터 목록] → [스토리 재생]
    ├── [주민] → [주민 관리] → [배치]
    ├── [상점] → [보석/자원/특별 상품]
    └── [설정] → [옵션]
```

### 5.3 피드백 시스템
| 이벤트 | 시각 | 청각 | 촉각 |
|--------|------|------|------|
| 자원 수확 | 자원 이펙트 | 수확음 | - |
| 건설 시작 | 건설 애니메이션 | 건설음 | 진동 (약) |
| 건설 완료 | 완료 연출 | 팡파레 | 진동 (중) |
| 스토리 해금 | 책 펼침 연출 | 스토리 BGM | 진동 (약) |
| 레벨업 | 왕국 레벨업 연출 | 레벨업 음악 | 진동 (강) |

### 5.4 접근성
- **핀치 줌**: 왕국 확대/축소
- **건물 스냅**: 자동 정렬 옵션
- **자동 수확**: 자동화 옵션
- **폰트 크기**: 3단계 조절
- **색맹 모드**: 자원 아이콘 패턴

---

## 6. 프로덕션 체크리스트

### 핵심 기능
- [ ] 건물 건설 시스템
- [ ] 자원 생산/관리
- [ ] 방치 수익
- [ ] 주민 시스템
- [ ] 스토리 시스템

### 콘텐츠
- [ ] 50+ 건물 종류
- [ ] 7 챕터 스토리
- [ ] 5+ 지역
- [ ] 튜토리얼
- [ ] NPC 대화

### 메타 시스템
- [ ] 프레스티지 시스템
- [ ] 일일/주간 퀘스트
- [ ] 도전과제
- [ ] 설정 화면
- [ ] 친구 시스템

### 수익화
- [ ] 광고 SDK
- [ ] IAP 상품
- [ ] 상점 UI
- [ ] VIP 패스

### QA/최적화
- [ ] 경제 밸런싱
- [ ] 렌더링 최적화
- [ ] 메모리 관리
- [ ] 크래시 리포팅

### 출시 준비
- [ ] 스토어 에셋
- [ ] 앱 설명
- [ ] 법적 문서
- [ ] 소프트 런칭

---

## 7. KPI 목표

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| D1 리텐션 | 48% | Firebase Analytics |
| D7 리텐션 | 20% | Firebase Analytics |
| D30 리텐션 | 9% | Firebase Analytics |
| 세션 길이 | 6분 | 평균 세션 시간 |
| 일일 세션 | 4회 | DAU / 세션 수 |
| ARPU | $0.15~0.22 | 총 매출 / DAU |
| 광고 시청률 | 55~65% | 광고 노출 / DAU |
| 결제 전환율 | 4~6% | 결제 유저 / DAU |

---

*마지막 업데이트: 2025-12-19*
